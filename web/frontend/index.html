<html>
<header>
	<title>front</title>
</header>
<body>
	<div><h1>this is a test</h1>
		<h2>updated: <span id="updated"></span></h2>
		<div><button onclick="getCafe()">getCafe()</button>
		<span id="getCafeRslt"></span>
	</div>
	<div>
		<label for="sendCafe">data to send:</label>
		<input type="text" id="sendCafe">
		<button onclick="sendCafe()">sendCafe()</button>
		<span id="sendCafeRslt"></span>
	</div>
</body>
<script>
	const dtFormat="%y%m%d%h%M%s";
	const u="http://localhost:11115/cafes";
	function dt() { 
	 const dt=new Date().toLocaleString();
	 document.getElementById("updated").textContent=dt;
	}
	async function cx_text(id,text) { 
	 document.getElementById(id).textContent=text;
	 dt();
	}
	async function getCafe() { 
	 const response=await fetch(u);
	 const jsondata=await response.json();
	 cx_text("getCafeRslt",jsondata.length);
	}
	async function sendCafe() { 
	 const data=document.getElementById("sendCafe").value;
	 if (!data) { 
	  console.log("null");
	  return;
	 }
	 const response=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json;charset=UTF-8"},body:JSON.stringify({name:data})});
	 result=await response.text();
	 cx_text("sendCafeRslt",result);
	}
	(()=>{dt();}) ();
</script>
</html>